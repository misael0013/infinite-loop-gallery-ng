<div class="admin-container">
  <!-- Header -->
  <header class="admin-header">
    <div class="header-content">
      <div class="header-left">
        <h1 class="admin-title">Panel de Administración</h1>
      </div>
      <div class="header-right">
        <button class="logout-btn" (click)="logout()" title="Cerrar sesión">
          <span class="logout-icon">🚪</span>
          Salir
        </button>
      </div>
    </div>
  </header>

  <!-- Navigation Tabs -->
  <nav class="admin-nav">
    <div class="nav-tabs">
      <button *ngFor="let tab of tabs"
              class="nav-tab"
              [class.active]="activeTab === tab.id"
              (click)="setActiveTab(tab.id)">
        <span class="tab-icon">{{ tab.icon }}</span>
        <span class="tab-label">{{ tab.label }}</span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="admin-main">
    <div class="content-container">

      <!-- Dashboard Tab -->
      <div *ngIf="activeTab === 'dashboard'" class="tab-content">
        <div class="content-header">
          <h2>Dashboard</h2>
          <p>Resumen general del sistema</p>
        </div>

        <div class="dashboard-grid">
          <div class="stat-card">
            <div class="stat-icon">📷</div>
            <div class="stat-info">
              <h3>Total Álbumes</h3>
              <p class="stat-number">{{ stats?.totalAlbums || 0 }}</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">🖼️</div>
            <div class="stat-info">
              <h3>Total Fotos</h3>
              <p class="stat-number">{{ stats?.totalImages || 0 }}</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">👥</div>
            <div class="stat-info">
              <h3>Visitantes únicos</h3>
              <p class="stat-number">{{ viewStats?.uniqueVisitors || 0 }}</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">📈</div>
            <div class="stat-info">
              <h3>Vistas hoy</h3>
              <p class="stat-number">{{ viewStats?.viewsToday || 0 }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Albums Tab (ACTUALIZADO) -->
      <div *ngIf="activeTab === 'albums'" class="tab-content">
        <div class="content-header">
          <h2>Gestión de Álbumes</h2>
          <p>Administra todos los álbumes de fotos</p>
        </div>

        <div class="toolbar">
          <button class="btn btn-primary" (click)="createAlbum()">
            <span>➕</span> Nuevo Álbum
          </button>
          <button class="btn btn-secondary" (click)="exportData()">
            <span>📤</span> Exportar
          </button>
        </div>

        <div class="albums-list">
          <div class="album-item" *ngFor="let a of albums">
            <div class="album-thumbnail">
              <img [src]="a.coverImage || a.images[0]" alt=""
                   style="width:100%;height:100%;object-fit:cover;border-radius:8px"/>
            </div>
            <div class="album-info">
              <h4>{{ a.title }}</h4>
              <p>
                {{ a.images.length }} fotos
                • {{ a.createdAt ? (formatDate(a.createdAt)) : '' }}
                • <span class="views-badge">👁 {{ formatViews(a.views || 0) }}</span>
                <span class="badge" style="margin-left:6px">{{ a.category || 'General' }}</span>
                <span *ngIf="a.isPrivate" class="badge" style="margin-left:6px">Privado</span>
              </p>
            </div>
            <div class="album-actions">
              <a class="action-btn edit" [routerLink]="['/admin/album', a.id]" title="Editar">✏️</a>
              <button class="action-btn delete" (click)="deleteAlbum(a.id)" title="Eliminar">🗑️</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Users Tab -->
      <div *ngIf="activeTab === 'users'" class="tab-content">
        <div class="content-header">
          <h2>Gestión de Usuarios</h2>
          <p>Administra usuarios y permisos</p>
        </div>

        <div class="toolbar">
          <button class="btn btn-primary"><span>👤</span> Nuevo Usuario</button>
        </div>

        <div class="users-table">
          <div class="table-header">
            <div class="header-cell">Usuario</div>
            <div class="header-cell">Email</div>
            <div class="header-cell">Rol</div>
            <div class="header-cell">Estado</div>
            <div class="header-cell">Acciones</div>
          </div>

          <div class="table-row">
            <div class="cell">admin</div>
            <div class="cell">admin&#64;ejemplo.com</div>
            <div class="cell"><span class="role-badge admin">Administrador</span></div>
            <div class="cell"><span class="status-badge active">Activo</span></div>
            <div class="cell">
              <button class="action-btn edit">✏️</button>
              <button class="action-btn delete">🗑️</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>
